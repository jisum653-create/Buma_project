<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1979, íƒ€ì˜¤ë¥´ëŠ” ì²­ë…„ì˜ ì—´ì •: ë¶€ë§ˆë¯¼ì£¼í•­ìŸì˜ ëª©ì†Œë¦¬</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700;900&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }

        /* --- ìƒë‹¨ íˆì–´ë¡œ ì„¹ì…˜ (íŒ¨ëŸ´ë™ìŠ¤ íš¨ê³¼ ì ìš©) --- */
        .hero-header {
            position: relative;
            width: 100%;
            height: 380px; /* ë†’ì´ ì•½ê°„ ì¦ê°€ */
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1533613220915-609f661a6fe1?q=80&w=1920&auto=format&fit=crop'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* íŒ¨ëŸ´ë™ìŠ¤ í•µì‹¬ */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            margin-bottom: 40px;
            transition: background-position 0.1s;
        }

        .hero-header h2 {
            font-size: 2.8rem;
            margin: 0 0 15px 0;
            font-weight: 900;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: -1px;
            word-break: keep-all;
            padding: 0 20px;
            animation: fadeInDown 1s ease-out;
        }

        .hero-header .description {
            font-size: 1.15rem;
            max-width: 700px;
            color: #f0f0f0;
            line-height: 1.6;
            padding: 0 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            margin: 0;
            animation: fadeInUp 1s ease-out 0.3s both; /* 0.3ì´ˆ ë”œë ˆì´ */
        }

        /* ì• ë‹ˆë©”ì´ì…˜ í‚¤í”„ë ˆì„ */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* í™ˆ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .home-button {
            position: absolute;
            top: 25px;
            left: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            background-color: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            z-index: 100;
        }

        .home-button:hover {
            background-color: white;
            color: #333;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .home-button svg {
            width: 24px;
            height: 24px;
        }

        /* --- ë©”ì¸ ì½˜í…ì¸  ë˜í¼ --- */
        .content-wrapper {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 40px 60px 40px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        /* ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s ease-out;
        }
        .scroll-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- ì›Œë“œí´ë¼ìš°ë“œ ìŠ¤íƒ€ì¼ --- */
        #word-cloud {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 20px;
            width: 100%;
            max-width: 800px;
            height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-bottom: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        #word-cloud:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.12);
        }

        /* --- í•„í„° ë²„íŠ¼ ìŠ¤íƒ€ì¼ --- */
        .filter-container {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background-color: white;
            color: #555;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .filter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .filter-btn.active {
            color: white;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: scale(1.05);
        }

        .filter-btn[data-category="all"].active { background-color: #555; }
        .filter-btn[data-category="action"].active { background-color: #D32F2F; }
        .filter-btn[data-category="value"].active { background-color: #1976D2; }
        .filter-btn[data-category="emotion"].active { background-color: #F57C00; }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .tooltip {
            position: absolute;
            text-align: center;
            padding: 10px 16px;
            font-size: 14px;
            background: rgba(0, 0, 0, 0.85);
            color: #fff;
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            line-height: 1.5;
            transform: translate(-50%, -100%);
            margin-top: -10px; 
            white-space: nowrap;
        }
        
        /* ë¶„ì„ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .analysis-table-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 50px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .analysis-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .analysis-table th, .analysis-table td {
            padding: 18px 24px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.4s ease; /* í–‰ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
        }

        .analysis-table th {
            background-color: #f9fafb;
            font-weight: 700;
            color: #333;
            border-bottom: 2px solid #e0e0e0;
            font-size: 1rem;
        }

        .analysis-table tr:last-child td {
            border-bottom: none;
        }

        /* í…Œì´ë¸” í–‰ ì¸í„°ë™ì…˜ ìŠ¤íƒ€ì¼ */
        .analysis-table tr.inactive-row {
            opacity: 0.25;
            filter: grayscale(100%);
            background-color: #fafafa;
        }

        .analysis-table tr.active-row {
            opacity: 1;
            background-color: #fffcf5; /* ì‚´ì§ ê°•ì¡°ëœ ë°°ê²½ìƒ‰ */
            transform: scale(1.01);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            z-index: 10;
            position: relative;
        }

        .category-cell {
            font-weight: 800;
            white-space: nowrap;
            font-size: 1.05rem;
        }
        
        .cat-action { color: #D32F2F; }
        .cat-value { color: #1976D2; }
        .cat-emotion { color: #F57C00; }

        .keywords-cell {
            color: #444;
            line-height: 1.7;
            font-weight: 500;
        }

        .interpretation-cell {
            color: #555;
            line-height: 1.6;
            font-size: 0.92rem;
            background-color: #fcfcfc;
            border-radius: 8px;
        }

        /* ì°¸ê³  ìë£Œ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .sources-container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 35px;
            box-sizing: border-box;
        }

        .sources-container h3 {
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 1.2rem;
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .source-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 10px;
            border-bottom: 1px solid #f5f5f5;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .source-item:hover {
            background-color: #f9f9f9;
        }

        .source-item:last-child {
            border-bottom: none;
        }

        .source-info {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
            margin-right: 20px;
        }

        .source-title {
            font-weight: 600;
            color: #222;
            font-size: 1rem;
        }

        .source-origin {
            font-size: 0.85rem;
            color: #888;
        }

        .source-link {
            display: inline-block;
            background-color: #f0f0f0;
            color: #555;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .source-link:hover {
            background-color: #333;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        @media (max-width: 800px) {
            .hero-header {
                height: 300px;
                padding: 0 15px;
                background-attachment: scroll; /* ëª¨ë°”ì¼ ì„±ëŠ¥ ì´ìŠˆ ë°©ì§€ */
            }
            .hero-header h2 {
                font-size: 2rem;
            }
            .content-wrapper {
                padding: 0 20px 40px 20px;
                align-items: center;
            }
            .analysis-table th, .analysis-table td {
                padding: 15px;
                display: block;
                width: 100%;
                box-sizing: border-box;
            }
            .analysis-table th {
                display: none;
            }
            .category-cell {
                font-size: 1.2rem;
                margin-bottom: 8px;
                border-bottom: none;
                padding-bottom: 0;
            }
            .keywords-cell {
                padding-top: 0;
                padding-bottom: 15px;
            }
            .interpretation-cell {
                background-color: #f0f0f0;
                border-radius: 12px;
                margin-bottom: 25px;
                padding: 15px;
            }
            .source-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .source-link {
                width: 100%;
                text-align: center;
                box-sizing: border-box;
            }
            .source-info {
                margin-right: 0;
            }
            .filter-container {
                justify-content: center;
            }
        }
    </style>
</head>
<body>

    <!-- ìƒë‹¨ íˆì–´ë¡œ ì„¹ì…˜ -->
    <header class="hero-header">
        <a href="index.html" class="home-button" aria-label="ë©”ì¸ìœ¼ë¡œ ì´ë™">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        </a>

        <h2>1979, íƒ€ì˜¤ë¥´ëŠ” ì²­ë…„ì˜ ì—´ì •: ë¶€ë§ˆë¯¼ì£¼í•­ìŸì˜ ëª©ì†Œë¦¬</h2>
        <p class="description">
            1979ë…„ 10ì›”, ë¶€ì‚°ëŒ€í•™êµ ì²­ë…„ë“¤ì˜ ì„ ì–¸ë¬¸ê³¼ ê¸°ë¡ì—ì„œ ì¶”ì¶œí•œ í•µì‹¬ ë‹¨ì–´ë“¤ì…ë‹ˆë‹¤.<br>
            ê·¸ë“¤ì˜ ëœ¨ê±°ìš´ ì—´ì •ê³¼ ì‹œëŒ€ì •ì‹ ì„ ë°ì´í„°ë¡œ ì‹œê°í™”í–ˆìŠµë‹ˆë‹¤.
        </p>
    </header>

    <!-- ë©”ì¸ ì½˜í…ì¸  ë˜í¼ -->
    <div class="content-wrapper">
        
        <!-- í•„í„° ë²„íŠ¼ ì˜ì—­ (ìƒë‹¨ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì ‘ê·¼ì„± ë†’ì„) -->
        <div class="filter-container scroll-reveal">
            <button class="filter-btn active" data-category="all" onclick="filterWords('all')">
                <span>ì „ì²´ ë³´ê¸°</span>
            </button>
            <button class="filter-btn" data-category="action" onclick="filterWords('action')">
                <div class="dot" style="background-color: #D32F2F;"></div>
                <span>í–‰ë™ (Action)</span>
            </button>
            <button class="filter-btn" data-category="value" onclick="filterWords('value')">
                <div class="dot" style="background-color: #1976D2;"></div>
                <span>ê°€ì¹˜ (Value)</span>
            </button>
            <button class="filter-btn" data-category="emotion" onclick="filterWords('emotion')">
                <div class="dot" style="background-color: #F57C00;"></div>
                <span>ê°ì • (Emotion)</span>
            </button>
        </div>

        <!-- ì›Œë“œí´ë¼ìš°ë“œ ì˜ì—­ -->
        <div id="word-cloud" class="scroll-reveal"></div>

        <!-- ë¶„ì„ í…Œì´ë¸” ì„¹ì…˜ -->
        <div class="analysis-table-container scroll-reveal">
            <table class="analysis-table">
                <thead>
                    <tr>
                        <th width="15%">ë¶„ë¥˜</th>
                        <th width="50%">ì£¼ìš” í‚¤ì›Œë“œ</th>
                        <th width="35%">í•´ì„ (ì²­ë…„ì˜ ì—´ì • ë¶„ì„)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- í–‰ë³„ë¡œ data-category ì¶”ê°€í•˜ì—¬ ì‹ë³„ ê°€ëŠ¥í•˜ê²Œ í•¨ -->
                    <tr data-category="action">
                        <td class="category-cell cat-action">í–‰ë™ ì–¸ì–´<br><small>(Action)</small></td>
                        <td class="keywords-cell">
                            <strong>ë…ì¬ íƒ€ë„, ìœ ì‹  ì² í, íˆ¬ìŸ</strong>, íšƒë¶ˆ, ìŠ¤í¬ëŸ¼, í•­ê±°, ì—°ëŒ€, ì •ë¬¸ ëŒíŒŒ, ë„ì„œê´€, ìµœë£¨íƒ„, ì§ì„ ì œ, ê¶ê¸°
                        </td>
                        <td class="interpretation-cell">
                            ë‹¹ì‹œì˜ ì—´ì •ì€ ë‚´ë©´ì˜ ê³ ë¯¼ì— ë¨¸ë¬´ë¥´ì§€ ì•Šê³ , <strong>ì§ì ‘ ëª¸ìœ¼ë¡œ ë¶€ë”ªíˆëŠ” ì‹¤ì²œì  ì—ë„ˆì§€</strong>ì˜€ìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. 'íƒ€ë„', 'ì² í', 'ëŒíŒŒ' ê°™ì€ ê°•ë ¥í•œ íŒŒì—´ìŒì˜ ë‹¨ì–´ê°€ ì£¼ë¥¼ ì´ë£¹ë‹ˆë‹¤.
                        </td>
                    </tr>
                    <tr data-category="value">
                        <td class="category-cell cat-value">ê°€ì¹˜ ì–¸ì–´<br><small>(Value)</small></td>
                        <td class="keywords-cell">
                            <strong>ììœ , ë¯¼ì£¼, ì •ì˜</strong>, ë¯¼ì¡±, ì–‘ì‹¬, ì§„ë¦¬, ì§€ì„±, ì‚¬ëª…ê°, ì±…ì„ê°, ì—­ì‚¬, ì• êµ­
                        </td>
                        <td class="interpretation-cell">
                            í–‰ë™ì˜ ëª…ë¶„ì…ë‹ˆë‹¤. ê°œì¸ì˜ ì´ìµ(ì·¨ì—…, ì„±ì )ì´ ì•„ë‹Œ <strong>ê³µë™ì²´ì˜ ê°€ì¹˜(ë¯¼ì¡±, ì—­ì‚¬, ì •ì˜)</strong>ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ë‘ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </td>
                    </tr>
                    <tr data-category="emotion">
                        <td class="category-cell cat-emotion">ê°ì • ì–¸ì–´<br><small>(Emotion)</small></td>
                        <td class="keywords-cell">
                            <strong>ë¶„ë…¸, í”¼, í•¨ì„±</strong>, ìš©ê¸°, ë‘ë ¤ì›€, ë¶€ë„ëŸ¬ì›€, ì‹ì–´ê°€ëŠ” ì •ì—´, ë°•ìˆ˜, ê³ ë‡Œ
                        </td>
                        <td class="interpretation-cell">
                            ë‹¨ìˆœí•œ í¥ë¶„ì´ ì•„ë‹Œ, í˜„ì‹¤ì— ëŒ€í•œ <strong>'ì˜ë¶„(ì˜ë¡œìš´ ë¶„ë…¸)'</strong>ê³¼ ì§€ì„±ì¸ìœ¼ë¡œì„œ í–‰ë™í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì— ëŒ€í•œ <strong>'ë¶€ë„ëŸ¬ì›€'</strong>ì´ í–‰ë™ì˜ ë™ë ¥ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ì°¸ê³  ìë£Œ ì„¹ì…˜ -->
        <div class="sources-container scroll-reveal">
            <h3>ğŸ“Š ë°ì´í„° ì¶œì²˜ ë° ì°¸ê³  ìë£Œ</h3>
            
            <div class="source-item">
                <div class="source-info">
                    <span class="source-title">ë¶€ë§ˆ í•­ìŸì‹œ ë¶€ì‚°ëŒ€ í•™ìƒë“¤ì˜ ë¯¼ì£¼ ì„ ì–¸ë¬¸</span>
                    <span class="source-origin">êµ­ì‚¬í¸ì°¬ìœ„ì›íšŒ (ìš°ë¦¬ì—­ì‚¬ë„·)</span>
                </div>
                <a href="https://contents.history.go.kr/id/hm_150_0140" target="_blank" class="source-link">ì›ë¬¸ ë³´ê¸° â†—</a>
            </div>

            <div class="source-item">
                <div class="source-info">
                    <span class="source-title">ë¯¼ì£¼íˆ¬ìŸì„ ì–¸ë¬¸ (10.15 ë°°í¬ ì›ë¬¸)</span>
                    <span class="source-origin">ë¶€ë§ˆë¯¼ì£¼í•­ìŸê¸°ë…ì¬ë‹¨ ì•„ì¹´ì´ë¸Œ</span>
                </div>
                <a href="http://www.buma1979.com/portal/bumaRecord/view.do?record_id=37" target="_blank" class="source-link">ì›ë¬¸ ë³´ê¸° â†—</a>
            </div>

            <div class="source-item">
                <div class="source-info">
                    <span class="source-title">[íŠ¹ì§‘] ë¶€ë§ˆë¯¼ì£¼í•­ìŸ ë°œìì·¨ ë”°ë¼ê°€ë‹¤ (ì‹œê°„ëŒ€ë³„ ì •ë¦¬)</span>
                    <span class="source-origin">ì±„ë„PNU (ë¶€ì‚°ëŒ€ì‹ ë¬¸ì‚¬)</span>
                </div>
                <a href="https://channelpnu.pusan.ac.kr/news/articleView.html?idxno=31840" target="_blank" class="source-link">ì›ë¬¸ ë³´ê¸° â†—</a>
            </div>

            <div class="source-item">
                <div class="source-info">
                    <span class="source-title">2022 ë¶€ë§ˆë¯¼ì£¼í•­ìŸ êµ¬ìˆ ì‚¬ë£Œì§‘ (ì°¸ì—¬ì ì¦ì–¸)</span>
                    <span class="source-origin">ë¶€ë§ˆë¯¼ì£¼í•­ìŸê¸°ë…ì¬ë‹¨</span>
                </div>
                <a href="http://www.buma1979.com/portal/archive/introResourceBook/file/18.do" target="_blank" class="source-link">ì›ë¬¸ ë³´ê¸° â†—</a>
            </div>

            <div class="source-item">
                <div class="source-info">
                    <span class="source-title">ë¶€ë§ˆë¯¼ì£¼í•­ìŸ ì •ì˜ ë° ì „ê°œ ê³¼ì •</span>
                    <span class="source-origin">í•œêµ­ë¯¼ì¡±ë¬¸í™”ëŒ€ë°±ê³¼ì‚¬ì „</span>
                </div>
                <a href="https://encykorea.aks.ac.kr/Article/E0024157" target="_blank" class="source-link">ì›ë¬¸ ë³´ê¸° â†—</a>
            </div>
        </div>

    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // ì›ë³¸ ë°ì´í„°
        const allWords = [
            // í–‰ë™ ì–¸ì–´ (Action) - Red
            {text: "ë…ì¬íƒ€ë„", size: 100, category: "action"},
            {text: "ìœ ì‹ ì² í", size: 95, category: "action"},
            {text: "íˆ¬ìŸ", size: 90, category: "action"},
            {text: "íšƒë¶ˆ", size: 70, category: "action"},
            {text: "ìŠ¤í¬ëŸ¼", size: 65, category: "action"},
            {text: "í•­ê±°", size: 60, category: "action"},
            {text: "ì—°ëŒ€", size: 55, category: "action"},
            {text: "ì •ë¬¸ëŒíŒŒ", size: 50, category: "action"},
            {text: "ë„ì„œê´€", size: 45, category: "action"},
            {text: "ìµœë£¨íƒ„", size: 40, category: "action"},
            {text: "ì§ì„ ì œ", size: 55, category: "action"},
            {text: "ê¶ê¸°", size: 60, category: "action"},

            // ê°€ì¹˜ ì–¸ì–´ (Value) - Blue
            {text: "ììœ ", size: 95, category: "value"},
            {text: "ë¯¼ì£¼", size: 90, category: "value"},
            {text: "ì •ì˜", size: 85, category: "value"},
            {text: "ë¯¼ì¡±", size: 75, category: "value"},
            {text: "ì–‘ì‹¬", size: 70, category: "value"},
            {text: "ì§„ë¦¬", size: 65, category: "value"},
            {text: "ì§€ì„±", size: 60, category: "value"},
            {text: "ì‚¬ëª…ê°", size: 55, category: "value"},
            {text: "ì±…ì„ê°", size: 50, category: "value"},
            {text: "ì—­ì‚¬", size: 55, category: "value"},
            {text: "ì• êµ­", size: 45, category: "value"},

            // ê°ì • ì–¸ì–´ (Emotion) - Orange
            {text: "ë¶„ë…¸", size: 80, category: "emotion"},
            {text: "í”¼", size: 75, category: "emotion"},
            {text: "í•¨ì„±", size: 70, category: "emotion"},
            {text: "ìš©ê¸°", size: 60, category: "emotion"},
            {text: "ë‘ë ¤ì›€", size: 55, category: "emotion"},
            {text: "ë¶€ë„ëŸ¬ì›€", size: 50, category: "emotion"},
            {text: "ì‹ì–´ê°€ëŠ” ì •ì—´", size: 45, category: "emotion"},
            {text: "ë°•ìˆ˜", size: 40, category: "emotion"},
            {text: "ê³ ë‡Œ", size: 45, category: "emotion"},
        ];

        // ìƒ‰ìƒ ë§¤í•‘
        const colors = {
            action: "#D32F2F", // Red
            value: "#1976D2",  // Blue
            emotion: "#F57C00" // Orange
        };

        // ì›Œë“œí´ë¼ìš°ë“œ ë Œë”ë§ í•¨ìˆ˜
        function renderWordCloud(data) {
            document.getElementById('word-cloud').innerHTML = '';
            
            const width = document.getElementById('word-cloud').offsetWidth;
            const height = 500;

            const layoutData = data.map(d => ({ 
                text: d.text, 
                size: d.size, 
                category: d.category 
            }));

            const layout = d3.layout.cloud()
                .size([width, height])
                .words(layoutData)
                .padding(5)
                .rotate(function() { return ~~(Math.random() * 2) * 90; })
                .font("Noto Sans KR")
                .fontSize(function(d) { return d.size * 0.8; })
                .on("end", draw);

            layout.start();

            function draw(words) {
                const svg = d3.select("#word-cloud").append("svg")
                    .attr("width", layout.size()[0])
                    .attr("height", layout.size()[1])
                    .append("g")
                    .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")");

                const textGroups = svg.selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .style("font-size", function(d) { return d.size + "px"; })
                    .style("font-family", "Noto Sans KR")
                    .style("font-weight", "bold")
                    .style("fill", function(d) { return colors[d.category]; })
                    .attr("text-anchor", "middle")
                    .attr("transform", function(d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .text(function(d) { return d.text; })
                    .style("cursor", "pointer")
                    .style("opacity", 0)
                    .on("mouseover", function(event, d) {
                        d3.select(this).transition().duration(200).style("opacity", 0.7).style("font-size", (d.size * 1.1) + "px"); // í¬ê¸° í™•ëŒ€ íš¨ê³¼
                        
                        const tooltip = d3.select("#tooltip");
                        let categoryName = "";
                        if(d.category === 'action') categoryName = "í–‰ë™ ì–¸ì–´";
                        else if(d.category === 'value') categoryName = "ê°€ì¹˜ ì–¸ì–´";
                        else categoryName = "ê°ì • ì–¸ì–´";

                        tooltip.transition().duration(200).style("opacity", .9);
                        tooltip.html(`<strong>${d.text}</strong><br/>${categoryName}`)
                            .style("left", (event.pageX) + "px")
                            .style("top", (event.pageY) + "px");
                    })
                    .on("mousemove", function(event) {
                        d3.select("#tooltip")
                            .style("left", (event.pageX) + "px")
                            .style("top", (event.pageY) + "px");
                    })
                    .on("mouseout", function(d) {
                        d3.select(this).transition().duration(200).style("opacity", 1).style("font-size", d.size + "px"); // ì›ë˜ í¬ê¸°ë¡œ
                        d3.select("#tooltip").transition().duration(500).style("opacity", 0);
                    })
                    .on("click", function(event, d) {
                        // ë‹¨ì–´ í´ë¦­ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë¡œ í•„í„°ë§ ìˆ˜í–‰
                        filterWords(d.category);
                        // ìŠ¤í¬ë¡¤ì„ í…Œì´ë¸”ë¡œ ì´ë™ì‹œì¼œ ì‚¬ìš©ìê°€ ë³€í™”ë¥¼ ì¸ì§€í•˜ê²Œ í•¨
                        const table = document.querySelector('.analysis-table-container');
                        table.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    });

                textGroups.transition()
                    .duration(800)
                    .ease(d3.easeBackOut) // í†µí†µ íŠ€ëŠ” ë“±ì¥ íš¨ê³¼
                    .style("opacity", 1);
            }
        }

        // í†µí•© í•„í„°ë§ í•¨ìˆ˜ (ë²„íŠ¼ + í…Œì´ë¸” ì œì–´)
        function filterWords(category) {
            // 1. ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });

            // 2. ì›Œë“œí´ë¼ìš°ë“œ ë°ì´í„° í•„í„°ë§ ë° ë Œë”ë§
            let filteredData;
            if (category === 'all') {
                filteredData = allWords;
            } else {
                filteredData = allWords.filter(word => word.category === category);
            }
            renderWordCloud(filteredData);

            // 3. í…Œì´ë¸” í–‰ ê°•ì¡° ì²˜ë¦¬ (ì¸í„°ë™ì…˜ ì¶”ê°€)
            const rows = document.querySelectorAll('.analysis-table tbody tr');
            rows.forEach(row => {
                // ì´ˆê¸°í™”
                row.classList.remove('active-row', 'inactive-row');
                
                if (category === 'all') {
                    // ì „ì²´ ë³´ê¸°ë©´ ëª¨ë“  í–‰ í™œì„± (í´ë˜ìŠ¤ ì œê±° ìƒíƒœ)
                } else {
                    if (row.dataset.category === category) {
                        row.classList.add('active-row');
                    } else {
                        row.classList.add('inactive-row');
                    }
                }
            });
        }

        // ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ê´€ì°°ì (Intersection Observer)
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.15
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target); // í•œ ë²ˆë§Œ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
                }
            });
        }, observerOptions);

        document.querySelectorAll('.scroll-reveal').forEach(el => {
            observer.observe(el);
        });

        // ì´ˆê¸° ë Œë”ë§
        renderWordCloud(allWords);

        // ë°˜ì‘í˜• ë¦¬ì‚¬ì´ì§•
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                const activeCategory = document.querySelector('.filter-btn.active').dataset.category;
                filterWords(activeCategory);
            }, 200);
        });

    </script>
</body>
</html>
